{"map":{"version":3,"sources":["static/js/main.397ade59.chunk.js"],"names":["this","push","184","module","__webpack_exports__","__webpack_require__","r","react","react_default","n","react_dom","react_dom_default","regenerator","regenerator_default","asyncToGenerator","slicedToArray","src_Lobby","_ref","username","handleUsernameChange","roomName","handleRoomNameChange","handleSubmit","a","createElement","onSubmit","htmlFor","type","id","value","onChange","required","toConsumableArray","es5","es5_default","src_Participant","participant","_useState","Object","_useState2","videoTracks","setVideoTracks","_useState3","_useState4","audioTracks","setAudioTracks","videoRef","audioRef","trackpubsToTracks","trackMap","Array","from","values","map","publication","track","filter","on","kind","concat","v","removeAllListeners","videoTrack","attach","current","detach","audioTrack","className","identity","ref","autoPlay","muted","src_Room","token","handleLogout","room","setRoom","participants","setParticipants","participantConnected","prevParticipants","participantDisconnected","p","connect","name","then","forEach","currentRoom","localParticipant","state","tracks","trackPublication","stop","disconnect","remoteParticipants","key","sid","onClick","src_VideoChat","setUsername","setRoomName","_useState5","_useState6","setToken","event","target","mark","_callee","data","wrap","_context","prev","next","preventDefault","fetch","method","body","JSON","stringify","headers","Content-Type","res","json","sent","_x","apply","arguments","src_App_0","role","aria-label","Boolean","window","location","hostname","match","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","69","exports","74","75"],"mappings":"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"},"code":"(this[\"webpackJsonpreact-express-starter\"]=this[\"webpackJsonpreact-express-starter\"]||[]).push([[0],{184:function(e,t,n){\"use strict\";n.r(t);var a=n(0),r=n.n(a),c=n(66),o=n.n(c),i=(n(74),n(75),n(26)),u=n.n(i),l=n(67),m=n(7),s=function(e){var t=e.username,n=e.handleUsernameChange,a=e.roomName,c=e.handleRoomNameChange,o=e.handleSubmit;return r.a.createElement(\"form\",{onSubmit:o},r.a.createElement(\"h2\",null,\"Enter a room\"),r.a.createElement(\"div\",null,r.a.createElement(\"label\",{htmlFor:\"name\"},\"Name:\"),r.a.createElement(\"input\",{type:\"text\",id:\"field\",value:t,onChange:n,required:!0})),r.a.createElement(\"div\",null,r.a.createElement(\"label\",{htmlFor:\"room\"},\"Room name:\"),r.a.createElement(\"input\",{type:\"text\",id:\"room\",value:a,onChange:c,required:!0})),r.a.createElement(\"button\",{type:\"submit\"},\"Submit\"))},f=n(13),d=n(68),p=n.n(d),b=function(e){var t=e.participant,n=Object(a.useState)([]),c=Object(m.a)(n,2),o=c[0],i=c[1],u=Object(a.useState)([]),l=Object(m.a)(u,2),s=l[0],d=l[1],p=Object(a.useRef)(),b=Object(a.useRef)(),h=function(e){return Array.from(e.values()).map((function(e){return e.track})).filter((function(e){return null!==e}))};return Object(a.useEffect)((function(){i(h(t.videoTracks)),d(h(t.audioTracks));return t.on(\"trackSubscribed\",(function(e){\"video\"===e.kind?i((function(t){return[].concat(Object(f.a)(t),[e])})):\"audio\"===e.kind&&d((function(t){return[].concat(Object(f.a)(t),[e])}))})),t.on(\"trackUnsubscribed\",(function(e){\"video\"===e.kind?i((function(t){return t.filter((function(t){return t!==e}))})):\"audio\"===e.kind&&d((function(t){return t.filter((function(t){return t!==e}))}))})),function(){i([]),d([]),t.removeAllListeners()}}),[t]),Object(a.useEffect)((function(){var e=o[0];if(e)return e.attach(p.current),function(){e.detach()}}),[o]),Object(a.useEffect)((function(){var e=s[0];if(e)return e.attach(b.current),function(){e.detach()}}),[s]),r.a.createElement(\"div\",{className:\"participant\"},r.a.createElement(\"h3\",null,t.identity),r.a.createElement(\"video\",{ref:p,autoPlay:!0}),r.a.createElement(\"audio\",{ref:b,autoPlay:!0,muted:!0}))},h=function(e){var t=e.roomName,n=e.token,c=e.handleLogout,o=Object(a.useState)(null),i=Object(m.a)(o,2),u=i[0],l=i[1],s=Object(a.useState)([]),d=Object(m.a)(s,2),h=d[0],E=d[1];Object(a.useEffect)((function(){var e=function(e){E((function(t){return[].concat(Object(f.a)(t),[e])}))},a=function(e){E((function(t){return t.filter((function(t){return t!==e}))}))};return p.a.connect(n,{name:t}).then((function(t){l(t),t.on(\"participantConnected\",e),t.on(\"participantDisconnected\",a),t.participants.forEach(e)})),function(){l((function(e){return e&&\"connected\"===e.localParticipant.state?(e.localParticipant.tracks.forEach((function(e){e.track.stop()})),e.disconnect(),null):e}))}}),[t,n]);var v=h.map((function(e){return r.a.createElement(b,{key:e.sid,participant:e})}));return r.a.createElement(\"div\",{className:\"room\"},r.a.createElement(\"h2\",null,\"Room: \",t),r.a.createElement(\"button\",{onClick:c},\"Log out\"),r.a.createElement(\"div\",{className:\"local-participant\"},u?r.a.createElement(b,{key:u.localParticipant.sid,participant:u.localParticipant}):\"\"),r.a.createElement(\"h3\",null,\"Remote Participants\"),r.a.createElement(\"div\",{className:\"remote-participants\"},v))},E=function(){var e=Object(a.useState)(\"\"),t=Object(m.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(\"\"),i=Object(m.a)(o,2),f=i[0],d=i[1],p=Object(a.useState)(null),b=Object(m.a)(p,2),E=b[0],v=b[1],j=Object(a.useCallback)((function(e){c(e.target.value)}),[]),O=Object(a.useCallback)((function(e){d(e.target.value)}),[]),k=Object(a.useCallback)(function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch(\"/video/token\",{method:\"POST\",body:JSON.stringify({identity:n,room:f}),headers:{\"Content-Type\":\"application/json\"}}).then((function(e){return e.json()}));case 3:a=e.sent,v(a.token);case 5:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[f,n]),g=Object(a.useCallback)((function(e){v(null)}),[]);return E?r.a.createElement(h,{roomName:f,token:E,handleLogout:g}):r.a.createElement(s,{username:n,roomName:f,handleUsernameChange:j,handleRoomNameChange:O,handleSubmit:k})},v=function(){return r.a.createElement(\"div\",{className:\"app\"},r.a.createElement(\"header\",null,r.a.createElement(\"h1\",null,\"Video Chat with Hooks\")),r.a.createElement(\"main\",null,r.a.createElement(E,null)),r.a.createElement(\"footer\",null,r.a.createElement(\"p\",null,\"Made with\",\" \",r.a.createElement(\"span\",{role:\"img\",\"aria-label\":\"React\"},\"\\u269b\\ufe0f\"),\" \",\"by RITHIKA\")))};Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(v,null),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},69:function(e,t,n){e.exports=n(184)},74:function(e,t,n){},75:function(e,t,n){}},[[69,1,2]]]);","extractedComments":[]}